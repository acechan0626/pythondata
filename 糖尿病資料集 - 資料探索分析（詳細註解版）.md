# ç³–å°¿ç—…è³‡æ–™é›† - è³‡æ–™æ¢ç´¢åˆ†æï¼ˆè©³ç´°è¨»è§£ç‰ˆï¼‰

ä»¥ä¸‹æ˜¯åœ¨ Google Colab ä¸­é€²è¡Œè³‡æ–™æ¢ç´¢çš„å®Œæ•´ç¨‹å¼ç¢¼ï¼Œæ¯ä¸€è¡Œéƒ½æœ‰è©³ç´°çš„ä¸­æ–‡è¨»è§£èªªæ˜ã€‚

## **æ­¥é©Ÿ 1ï¼šç’°å¢ƒè¨­å®šèˆ‡è¼‰å…¥è³‡æ–™**

```python
# å¼•å…¥pandaså‡½å¼åº«ï¼Œç”¨æ–¼è³‡æ–™è™•ç†å’Œåˆ†æ
import pandas as pd

# å¼•å…¥matplotlib.pyplotï¼Œç”¨æ–¼åŸºæœ¬çš„åœ–è¡¨ç¹ªè£½
import matplotlib.pyplot as plt

# å¼•å…¥seabornï¼Œç”¨æ–¼çµ±è¨ˆåœ–è¡¨çš„ç¾åŒ–å’Œé€²éšè¦–è¦ºåŒ–
import seaborn as sns

# å¼•å…¥numpyï¼Œç”¨æ–¼æ•¸å€¼è¨ˆç®—å’Œé™£åˆ—æ“ä½œ
import numpy as np

# å¼•å…¥warningsæ¨¡çµ„ï¼Œç”¨æ–¼æ§åˆ¶è­¦å‘Šè¨Šæ¯çš„é¡¯ç¤º
import warnings

# å¼•å…¥requestsï¼Œç”¨æ–¼ç™¼é€HTTPè«‹æ±‚ä¸‹è¼‰ç¶²è·¯è³‡æ–™
import requests

# å¼•å…¥ioæ¨¡çµ„ï¼Œç”¨æ–¼è™•ç†è¼¸å…¥è¼¸å‡ºæµ
import io

# è¨­å®šå¿½ç•¥æœªä¾†ç‰ˆæœ¬çš„è­¦å‘Šè¨Šæ¯ï¼Œé¿å…å¹²æ“¾è¼¸å‡ºçµæœ
warnings.simplefilter(action='ignore', category=FutureWarning)

# è¨­å®šmatplotlibåœ–è¡¨åœ¨è¢å¹•ä¸Šçš„è§£æåº¦ç‚º100 DPI
plt.rcParams['figure.dpi'] = 100

# è¨­å®šå„²å­˜åœ–è¡¨æ™‚çš„è§£æåº¦ç‚º300 DPIï¼Œç¢ºä¿é«˜å“è³ªè¼¸å‡º
plt.rcParams['savefig.dpi'] = 300

# --- è¼‰å…¥è³‡æ–™ ---
# ä½¿ç”¨try-exceptçµæ§‹ä¾†è™•ç†å¯èƒ½çš„è¼‰å…¥éŒ¯èª¤
try:
    # å®šç¾©è³‡æ–™é›†çš„ç¶²è·¯ä½å€
    url = "https://github.com/acechan0626/pythondata/raw/main/pima-indians-diabetes.csv"
    
    # ä½¿ç”¨pandasçš„read_csvå‡½æ•¸å¾URLç›´æ¥è®€å–CSVæª”æ¡ˆ
    df = pd.read_csv(url)
    
    # é¡¯ç¤ºæˆåŠŸè¼‰å…¥çš„è¨Šæ¯
    print("âœ… è³‡æ–™é›†å¾URLæˆåŠŸè¼‰å…¥ï¼")
    
    # é¡¯ç¤ºè³‡æ–™é›†çš„å½¢ç‹€ï¼ˆè¡Œæ•¸, åˆ—æ•¸ï¼‰
    print(f"è³‡æ–™é›†å½¢ç‹€ï¼š{df.shape}")
    
    # é¡¯ç¤ºæ›è¡Œç¬¦è™Ÿï¼Œè®“è¼¸å‡ºæ›´æ¸…æ¥š
    print("\nè³‡æ–™é›†å‰äº”ç­†è¨˜éŒ„ï¼š")
    
    # é¡¯ç¤ºè³‡æ–™é›†çš„å‰äº”ç­†è¨˜éŒ„
    print(df.head())
    
    # å†æ¬¡é¡¯ç¤ºæ›è¡Œç¬¦è™Ÿ
    print("\nè³‡æ–™é›†åŸºæœ¬è³‡è¨Šï¼š")
    
    # é¡¯ç¤ºè³‡æ–™é›†çš„åŸºæœ¬è³‡è¨Šï¼ˆæ¬„ä½åç¨±ã€è³‡æ–™å‹åˆ¥ã€éç©ºå€¼æ•¸é‡ç­‰ï¼‰
    print(df.info())

# å¦‚æœå¾URLè¼‰å…¥å¤±æ•—ï¼ŒåŸ·è¡Œexceptå€å¡Š
except Exception as e:
    # é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ï¼Œå…¶ä¸­{e}æœƒé¡¯ç¤ºå…·é«”çš„éŒ¯èª¤å…§å®¹
    print(f"âŒ å¾URLè¼‰å…¥å¤±æ•—ï¼š{e}")
    
    # æç¤ºä½¿ç”¨è€…å˜—è©¦æœ¬åœ°æª”æ¡ˆ
    print("è«‹å˜—è©¦ä¸Šå‚³æœ¬åœ°æª”æ¡ˆ...")
    
    # å˜—è©¦å¾æœ¬åœ°æª”æ¡ˆè¼‰å…¥ï¼ˆå‚™ç”¨æ–¹æ¡ˆï¼‰
    try:
        # å¾ç•¶å‰ç›®éŒ„è®€å–CSVæª”æ¡ˆ
        df = pd.read_csv('pima-indians-diabetes.csv')
        
        # é¡¯ç¤ºæœ¬åœ°è¼‰å…¥æˆåŠŸçš„è¨Šæ¯
        print("âœ… è³‡æ–™é›†å¾æœ¬åœ°æª”æ¡ˆæˆåŠŸè¼‰å…¥ï¼")
        
        # é¡¯ç¤ºè³‡æ–™é›†å½¢ç‹€
        print(f"è³‡æ–™é›†å½¢ç‹€ï¼š{df.shape}")
        
        print("\nè³‡æ–™é›†å‰äº”ç­†è¨˜éŒ„ï¼š")
        
        # é¡¯ç¤ºå‰äº”ç­†è¨˜éŒ„
        print(df.head())
        
    # å¦‚æœæœ¬åœ°æª”æ¡ˆä¹Ÿæ‰¾ä¸åˆ°ï¼Œé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
    except FileNotFoundError:
        print("âŒ éŒ¯èª¤ï¼šæ‰¾ä¸åˆ° 'pima-indians-diabetes.csv'ã€‚")
        print("è«‹å…ˆåœ¨ Colab å·¦å´çš„ã€Œæª”æ¡ˆã€é¢æ¿ä¸­ä¸Šå‚³æª”æ¡ˆã€‚")
```

## **æ­¥é©Ÿ 2ï¼šè³‡æ–™åŸºæœ¬çµ±è¨ˆæ‘˜è¦**

```python
# æª¢æŸ¥è®Šæ•¸dfæ˜¯å¦å­˜åœ¨æ–¼æœ¬åœ°è®Šæ•¸ä¸­ï¼ˆç¢ºä¿è³‡æ–™å·²æˆåŠŸè¼‰å…¥ï¼‰
if 'df' in locals():
    # é¡¯ç¤ºçµ±è¨ˆæ‘˜è¦çš„æ¨™é¡Œ
    print("=== è³‡æ–™åŸºæœ¬çµ±è¨ˆæ‘˜è¦ ===")
    
    # é¡¯ç¤ºæ•¸å€¼æ¬„ä½çš„æè¿°æ€§çµ±è¨ˆï¼ˆå¹³å‡å€¼ã€æ¨™æº–å·®ã€æœ€å°å€¼ã€æœ€å¤§å€¼ç­‰ï¼‰
    print(df.describe())
    
    # é¡¯ç¤ºç›®æ¨™è®Šæ•¸åˆ†æçš„æ¨™é¡Œ
    print("\n=== ç›®æ¨™è®Šæ•¸åˆ†å¸ƒ ===")
    
    # æª¢æŸ¥æ˜¯å¦å­˜åœ¨'Class'æ¬„ä½ï¼ˆç›®æ¨™è®Šæ•¸ï¼‰
    if 'Class' in df.columns:
        # è¨ˆç®—ä¸¦é¡¯ç¤ºClassæ¬„ä½ä¸­å„é¡åˆ¥çš„æ•¸é‡
        print(df['Class'].value_counts())
        
        # è¨ˆç®—ç³–å°¿ç—…é™½æ€§çš„æ¯”ä¾‹ï¼ˆClass=1çš„æ¯”ä¾‹ï¼‰ï¼Œä¸¦æ ¼å¼åŒ–ç‚ºç™¾åˆ†æ¯”
        print(f"ç³–å°¿ç—…é™½æ€§æ¯”ä¾‹ï¼š{df['Class'].mean():.2%}")
```

## **æ­¥é©Ÿ 3ï¼šç¹ªè£½ç›´æ–¹åœ– (Histograms)**

```python
# --- 1. ç›´æ–¹åœ– (Histograms) ---
# å†æ¬¡æª¢æŸ¥dfæ˜¯å¦å­˜åœ¨
if 'df' in locals():
    # é¡¯ç¤ºæ­£åœ¨ç”Ÿæˆç›´æ–¹åœ–çš„è¨Šæ¯
    print("\n--- æ­£åœ¨ç”Ÿæˆç›´æ–¹åœ– ---")
    
    # é¸æ“‡è³‡æ–™é›†ä¸­æ‰€æœ‰æ•¸å€¼å‹åˆ¥çš„æ¬„ä½ï¼ˆfloat64å’Œint64ï¼‰
    numeric_cols = df.select_dtypes(include=['float64', 'int64']).columns.tolist()
    
    # æª¢æŸ¥'Class'æ˜¯å¦åœ¨æ•¸å€¼æ¬„ä½ä¸­
    if 'Class' in numeric_cols:
        # å»ºç«‹ç‰¹å¾µæ¬„ä½åˆ—è¡¨ï¼Œæ’é™¤ç›®æ¨™è®Šæ•¸'Class'
        feature_cols = [col for col in numeric_cols if col != 'Class']
    else:
        # å¦‚æœæ²’æœ‰'Class'æ¬„ä½ï¼Œæ‰€æœ‰æ•¸å€¼æ¬„ä½éƒ½è¦–ç‚ºç‰¹å¾µ
        feature_cols = numeric_cols
    
    # è¨­å®šå­åœ–çš„åˆ—æ•¸ç‚º3
    n_cols = 3
    
    # è¨ˆç®—éœ€è¦çš„è¡Œæ•¸ï¼Œä½¿ç”¨ç„¡æ¢ä»¶é€²ä½é™¤æ³•
    n_rows = (len(feature_cols) + n_cols - 1) // n_cols

    # å»ºç«‹å­åœ–ï¼Œè¨­å®šåœ–ç‰‡å¤§å°ç‚ºå¯¬15è‹±å¯¸ï¼Œé«˜åº¦æ ¹æ“šè¡Œæ•¸èª¿æ•´
    fig, axes = plt.subplots(n_rows, n_cols, figsize=(15, n_rows * 4))
    
    # è™•ç†axesçš„ç¶­åº¦å•é¡Œ
    if n_rows == 1:
        # å¦‚æœåªæœ‰ä¸€è¡Œï¼Œæ ¹æ“šåˆ—æ•¸æ±ºå®šaxesçš„æ ¼å¼
        axes = [axes] if n_cols == 1 else axes
    else:
        # å¦‚æœæœ‰å¤šè¡Œï¼Œå°‡äºŒç¶­é™£åˆ—æ”¤å¹³æˆä¸€ç¶­é™£åˆ—ï¼Œæ–¹ä¾¿è¿­ä»£
        axes = axes.flatten()

    # è¿­ä»£æ¯å€‹ç‰¹å¾µæ¬„ä½ï¼ŒåŒæ™‚å–å¾—ç´¢å¼•å’Œæ¬„ä½åç¨±
    for i, col in enumerate(feature_cols):
        # ç¢ºä¿ç´¢å¼•ä¸è¶…éaxesçš„é•·åº¦
        if i < len(axes):
            # ä½¿ç”¨seabornç¹ªè£½ç›´æ–¹åœ–ï¼ŒåŒæ™‚é¡¯ç¤ºæ ¸å¯†åº¦ä¼°è¨ˆæ›²ç·š
            # kde=True è¡¨ç¤ºé¡¯ç¤ºæ ¸å¯†åº¦ä¼°è¨ˆ
            # alpha=0.7 è¨­å®šé€æ˜åº¦
            sns.histplot(df[col], kde=True, ax=axes[i], alpha=0.7)
            
            # è¨­å®šå­åœ–æ¨™é¡Œï¼Œä½¿ç”¨æ ¼å¼åŒ–å­—ä¸²æ’å…¥æ¬„ä½åç¨±
            axes[i].set_title(f'Distribution of {col}', fontsize=12, fontweight='bold')
            
            # è¨­å®šxè»¸æ¨™ç±¤
            axes[i].set_xlabel(col)
            
            # è¨­å®šyè»¸æ¨™ç±¤
            axes[i].set_ylabel('Frequency')
            
            # æ·»åŠ ç¶²æ ¼ç·šï¼Œalpha=0.3è¨­å®šç¶²æ ¼ç·šçš„é€æ˜åº¦
            axes[i].grid(True, alpha=0.3)

    # éš±è—å¤šé¤˜çš„å­åœ–ï¼ˆç•¶ç‰¹å¾µæ•¸é‡ä¸èƒ½æ•´é™¤åˆ—æ•¸æ™‚ï¼‰
    for i in range(len(feature_cols), len(axes)):
        # åˆªé™¤å¤šé¤˜çš„å­åœ–
        fig.delaxes(axes[i])

    # è‡ªå‹•èª¿æ•´å­åœ–é–“è·ï¼Œé¿å…é‡ç–Š
    plt.tight_layout()
    
    # å„²å­˜åœ–ç‰‡ï¼Œbbox_inches='tight'ç¢ºä¿å®Œæ•´ä¿å­˜ï¼Œdpi=300è¨­å®šé«˜è§£æåº¦
    plt.savefig('histograms.png', bbox_inches='tight', dpi=300)
    
    # é¡¯ç¤ºåœ–ç‰‡
    plt.show()
    
    # é¡¯ç¤ºå®Œæˆè¨Šæ¯
    print("âœ… ç›´æ–¹åœ–å·²ç”Ÿæˆä¸¦é¡¯ç¤ºï¼Œä¸¦å„²å­˜ç‚º histograms.png")
```

## **æ­¥é©Ÿ 4ï¼šç¹ªè£½ç®±å‹åœ– (Box Plots)**

```python
# --- 2. ç®±å‹åœ– (Box Plots) ---
# æª¢æŸ¥dfæ˜¯å¦å­˜åœ¨
if 'df' in locals():
    # é¡¯ç¤ºæ­£åœ¨ç”Ÿæˆç®±å‹åœ–çš„è¨Šæ¯
    print("\n--- æ­£åœ¨ç”Ÿæˆç®±å‹åœ– ---")
    
    # å»ºç«‹å­åœ–ï¼Œä½¿ç”¨èˆ‡ç›´æ–¹åœ–ç›¸åŒçš„ä½ˆå±€
    fig, axes = plt.subplots(n_rows, n_cols, figsize=(15, n_rows * 4))
    
    # è™•ç†axesçš„ç¶­åº¦å•é¡Œï¼ˆèˆ‡ç›´æ–¹åœ–ç›¸åŒçš„é‚è¼¯ï¼‰
    if n_rows == 1:
        axes = [axes] if n_cols == 1 else axes
    else:
        axes = axes.flatten()

    # è¿­ä»£æ¯å€‹ç‰¹å¾µæ¬„ä½
    for i, col in enumerate(feature_cols):
        # ç¢ºä¿ç´¢å¼•ä¸è¶…éaxesçš„é•·åº¦
        if i < len(axes):
            # ä½¿ç”¨seabornç¹ªè£½ç®±å‹åœ–
            # x=df[col] æŒ‡å®šè¦ç¹ªè£½çš„è³‡æ–™
            sns.boxplot(x=df[col], ax=axes[i])
            
            # è¨­å®šå­åœ–æ¨™é¡Œ
            axes[i].set_title(f'Box Plot of {col}', fontsize=12, fontweight='bold')
            
            # è¨­å®šxè»¸æ¨™ç±¤
            axes[i].set_xlabel(col)
            
            # æ·»åŠ ç¶²æ ¼ç·š
            axes[i].grid(True, alpha=0.3)

    # éš±è—å¤šé¤˜çš„å­åœ–
    for i in range(len(feature_cols), len(axes)):
        fig.delaxes(axes[i])

    # è‡ªå‹•èª¿æ•´ä½ˆå±€
    plt.tight_layout()
    
    # å„²å­˜åœ–ç‰‡
    plt.savefig('boxplots.png', bbox_inches='tight', dpi=300)
    
    # é¡¯ç¤ºåœ–ç‰‡
    plt.show()
    
    # é¡¯ç¤ºå®Œæˆè¨Šæ¯
    print("âœ… ç®±å‹åœ–å·²ç”Ÿæˆä¸¦é¡¯ç¤ºï¼Œä¸¦å„²å­˜ç‚º boxplots.png")
```

## **æ­¥é©Ÿ 5ï¼šç¹ªè£½ç›¸é—œçŸ©é™£ (Correlation Matrix)**

```python
# --- 3. ç›¸é—œçŸ©é™£ (Correlation Matrix) ---
# æª¢æŸ¥dfæ˜¯å¦å­˜åœ¨
if 'df' in locals():
    # é¡¯ç¤ºæ­£åœ¨ç”Ÿæˆç›¸é—œçŸ©é™£çš„è¨Šæ¯
    print("\n--- æ­£åœ¨ç”Ÿæˆç›¸é—œçŸ©é™£ç†±åŠ›åœ– ---")
    
    # è¨ˆç®—æ‰€æœ‰æ•¸å€¼æ¬„ä½ä¹‹é–“çš„çš®çˆ¾æ£®ç›¸é—œä¿‚æ•¸çŸ©é™£
    corr_matrix = df[numeric_cols].corr()

    # å»ºç«‹æ–°çš„åœ–ç‰‡ï¼Œè¨­å®šå¤§å°ç‚º12x10è‹±å¯¸
    plt.figure(figsize=(12, 10))
    
    # å»ºç«‹ä¸Šä¸‰è§’é®ç½©ï¼Œé¿å…é‡è¤‡é¡¯ç¤ºç›¸é—œä¿‚æ•¸
    # np.triuå»ºç«‹ä¸Šä¸‰è§’çŸ©é™£ï¼Œnp.ones_likeå»ºç«‹èˆ‡corr_matrixç›¸åŒå½¢ç‹€çš„çŸ©é™£
    mask = np.triu(np.ones_like(corr_matrix, dtype=bool))
    
    # ä½¿ç”¨seabornç¹ªè£½ç†±åŠ›åœ–
    sns.heatmap(corr_matrix,           # è¦ç¹ªè£½çš„è³‡æ–™çŸ©é™£
                mask=mask,             # é®ç½©ï¼Œéš±è—ä¸Šä¸‰è§’éƒ¨åˆ†
                annot=True,            # åœ¨æ¯å€‹æ ¼å­ä¸­é¡¯ç¤ºæ•¸å€¼
                cmap='coolwarm',       # ä½¿ç”¨å†·æš–è‰²èª¿çš„è‰²å½©æ˜ å°„
                fmt='.2f',             # æ•¸å€¼æ ¼å¼ï¼Œä¿ç•™å…©ä½å°æ•¸
                center=0,              # è‰²å½©æ˜ å°„çš„ä¸­å¿ƒé»è¨­ç‚º0
                square=True,           # æ¯å€‹æ ¼å­éƒ½æ˜¯æ­£æ–¹å½¢
                cbar_kws={"shrink": .8})  # è‰²å½©æ¢çš„å¤§å°èª¿æ•´ç‚º80%
    
    # è¨­å®šåœ–ç‰‡æ¨™é¡Œï¼Œpad=20å¢åŠ æ¨™é¡Œèˆ‡åœ–ç‰‡çš„é–“è·
    plt.title('Correlation Matrix of Numerical Features', 
              fontsize=16, fontweight='bold', pad=20)
    
    # è‡ªå‹•èª¿æ•´ä½ˆå±€
    plt.tight_layout()
    
    # å„²å­˜åœ–ç‰‡
    plt.savefig('correlation_matrix.png', bbox_inches='tight', dpi=300)
    
    # é¡¯ç¤ºåœ–ç‰‡
    plt.show()
    
    # é¡¯ç¤ºå®Œæˆè¨Šæ¯
    print("âœ… ç›¸é—œçŸ©é™£ç†±åŠ›åœ–å·²ç”Ÿæˆä¸¦é¡¯ç¤ºï¼Œä¸¦å„²å­˜ç‚º correlation_matrix.png")
    
    # é¡¯ç¤ºé«˜ç›¸é—œæ€§è®Šæ•¸å°çš„æ¨™é¡Œ
    print("\n=== é«˜ç›¸é—œæ€§è®Šæ•¸å° (|r| > 0.5) ===")
    
    # å»ºç«‹ç©ºåˆ—è¡¨ä¾†å„²å­˜é«˜ç›¸é—œæ€§çš„è®Šæ•¸å°
    high_corr = []
    
    # é›™é‡è¿´åœˆéæ­·ç›¸é—œçŸ©é™£çš„ä¸‹ä¸‰è§’éƒ¨åˆ†
    for i in range(len(corr_matrix.columns)):        # å¤–å±¤è¿´åœˆï¼šè¡Œ
        for j in range(i+1, len(corr_matrix.columns)): # å…§å±¤è¿´åœˆï¼šåˆ—ï¼ˆå¾i+1é–‹å§‹é¿å…é‡è¤‡ï¼‰
            # å–å¾—ç›¸é—œä¿‚æ•¸å€¼
            corr_val = corr_matrix.iloc[i, j]
            
            # å¦‚æœçµ•å°å€¼å¤§æ–¼0.5ï¼Œè¦–ç‚ºé«˜ç›¸é—œæ€§
            if abs(corr_val) > 0.5:
                # å°‡è®Šæ•¸å°å’Œç›¸é—œä¿‚æ•¸åŠ å…¥åˆ—è¡¨
                high_corr.append((corr_matrix.columns[i], corr_matrix.columns[j], corr_val))
    
    # æª¢æŸ¥æ˜¯å¦æ‰¾åˆ°é«˜ç›¸é—œæ€§çš„è®Šæ•¸å°
    if high_corr:
        # è¿­ä»£ä¸¦é¡¯ç¤ºæ¯å€‹é«˜ç›¸é—œæ€§è®Šæ•¸å°
        for var1, var2, corr_val in high_corr:
            # ä½¿ç”¨ç®­é ­ç¬¦è™Ÿé¡¯ç¤ºè®Šæ•¸å°ï¼Œä¿ç•™ä¸‰ä½å°æ•¸
            print(f"{var1} â†” {var2}: {corr_val:.3f}")
    else:
        # å¦‚æœæ²’æœ‰æ‰¾åˆ°ï¼Œé¡¯ç¤ºç›¸æ‡‰è¨Šæ¯
        print("æ²’æœ‰ç™¼ç¾é«˜ç›¸é—œæ€§çš„è®Šæ•¸å°")
```

## **æ­¥é©Ÿ 6ï¼šç¹ªè£½ Pairplot**

```python
# --- 4. Pairplot ---
# æª¢æŸ¥dfæ˜¯å¦å­˜åœ¨
if 'df' in locals():
    # é¡¯ç¤ºæ­£åœ¨ç”ŸæˆPairplotçš„è¨Šæ¯
    print("\n--- æ­£åœ¨ç”Ÿæˆ Pairplot (é€™å¯èƒ½éœ€è¦ä¸€äº›æ™‚é–“) ---")
    
    # æª¢æŸ¥æ˜¯å¦å­˜åœ¨'Class'æ¬„ä½
    if 'Class' in df.columns:
        # é¸æ“‡ä¸€äº›ä»£è¡¨æ€§çš„ç‰¹å¾µä¾†ç¹ªè£½pairplot
        # é¿å…åŒ…å«å¤ªå¤šè®Šæ•¸å°è‡´åœ–ç‰‡éæ–¼æ“æ“ å’Œè¨ˆç®—æ™‚é–“éé•·
        selected_cols = ['Glucose_concentration', 'Blood_pressure', 'BMI', 'Age', 'Class']
        
        # ç¢ºä¿æ‰€é¸çš„æ¬„ä½éƒ½å­˜åœ¨æ–¼è³‡æ–™é›†ä¸­
        # ä½¿ç”¨åˆ—è¡¨æ¨å°å¼éæ¿¾å­˜åœ¨çš„æ¬„ä½
        selected_cols = [col for col in selected_cols if col in df.columns]
        
        # æª¢æŸ¥æ˜¯å¦æœ‰è¶³å¤ çš„æ¬„ä½ä¾†ç¹ªè£½pairplotï¼ˆè‡³å°‘éœ€è¦2å€‹ï¼‰
        if len(selected_cols) > 1:
            # å»ºç«‹è³‡æ–™çš„å‰¯æœ¬ï¼Œé¿å…ä¿®æ”¹åŸå§‹è³‡æ–™
            df_pairplot = df[selected_cols].copy()
            
            # æª¢æŸ¥å‰¯æœ¬ä¸­æ˜¯å¦åŒ…å«'Class'æ¬„ä½
            if 'Class' in df_pairplot.columns:
                # å°‡'Class'æ¬„ä½è½‰æ›ç‚ºé¡åˆ¥å‹åˆ¥ï¼Œä»¥ç²å¾—æ›´å¥½çš„åœ–ä¾‹é¡¯ç¤º
                df_pairplot['Class'] = df_pairplot['Class'].astype('category')
                
                # ç¹ªè£½pairplotï¼Œæ ¹æ“šClassé€²è¡Œé¡è‰²åˆ†çµ„
                g = sns.pairplot(df_pairplot,           # è¦ç¹ªè£½çš„è³‡æ–™
                               hue='Class',             # æ ¹æ“šClassæ¬„ä½é€²è¡Œé¡è‰²åˆ†çµ„
                               diag_kind='kde',         # å°è§’ç·šåœ–è¡¨é¡å‹ç‚ºæ ¸å¯†åº¦ä¼°è¨ˆ
                               plot_kws={'alpha': 0.6}, # æ•£ä½ˆåœ–çš„é€æ˜åº¦
                               diag_kws={'alpha': 0.7}) # å°è§’ç·šåœ–çš„é€æ˜åº¦
                
                # è¨­å®šæ•´å€‹åœ–ç‰‡çš„ä¸»æ¨™é¡Œ
                # y=1.02 å°‡æ¨™é¡Œç¨å¾®å‘ä¸Šç§»å‹•ï¼Œé¿å…èˆ‡åœ–ç‰‡é‡ç–Š
                g.fig.suptitle('Pairplot of Selected Features by Diabetes Class', 
                              y=1.02, fontsize=16, fontweight='bold')
            else:
                # å¦‚æœæ²’æœ‰Classæ¬„ä½ï¼Œç¹ªè£½ä¸åˆ†çµ„çš„pairplot
                g = sns.pairplot(df_pairplot, diag_kind='kde')
                g.fig.suptitle('Pairplot of Selected Features', 
                              y=1.02, fontsize=16, fontweight='bold')
            
            # å„²å­˜åœ–ç‰‡
            plt.savefig('pairplot.png', bbox_inches='tight', dpi=300)
            
            # é¡¯ç¤ºåœ–ç‰‡
            plt.show()
            
            # é¡¯ç¤ºå®Œæˆè¨Šæ¯
            print("âœ… Pairplot å·²ç”Ÿæˆä¸¦é¡¯ç¤ºï¼Œä¸¦å„²å­˜ç‚º pairplot.png")
        else:
            # å¦‚æœæ¬„ä½æ•¸é‡ä¸è¶³ï¼Œé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
            print("âŒ æ²’æœ‰è¶³å¤ çš„æ¬„ä½ä¾†ç¹ªè£½pairplot")
    else:
        # å¦‚æœæ‰¾ä¸åˆ°Classæ¬„ä½ï¼Œé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
        print("âŒ æ‰¾ä¸åˆ°Classæ¬„ä½ï¼Œç„¡æ³•é€²è¡Œåˆ†é¡è‘—è‰²")

# é¡¯ç¤ºæ‰€æœ‰åœ–è¡¨ç”Ÿæˆå®Œç•¢çš„è¨Šæ¯
print("\nğŸ‰ æ‰€æœ‰åœ–è¡¨ç”Ÿæˆå®Œç•¢ï¼")
```

## **æ­¥é©Ÿ 7ï¼šé¡å¤–åˆ†æ - æŒ‰é¡åˆ¥åˆ†çµ„çš„çµ±è¨ˆæ‘˜è¦**

```python
# --- 5. æŒ‰é¡åˆ¥åˆ†çµ„çš„çµ±è¨ˆåˆ†æ ---
# æª¢æŸ¥dfæ˜¯å¦å­˜åœ¨ä¸”åŒ…å«'Class'æ¬„ä½
if 'df' in locals() and 'Class' in df.columns:
    # é¡¯ç¤ºåˆ†çµ„çµ±è¨ˆåˆ†æçš„æ¨™é¡Œ
    print("\n--- æŒ‰ç³–å°¿ç—…é¡åˆ¥åˆ†çµ„çš„çµ±è¨ˆæ‘˜è¦ ---")
    
    # æŒ‰'Class'æ¬„ä½åˆ†çµ„ï¼Œè¨ˆç®—ç‰¹å¾µæ¬„ä½çš„çµ±è¨ˆæ‘˜è¦
    # agg(['mean', 'std', 'median']) è¨ˆç®—å¹³å‡å€¼ã€æ¨™æº–å·®å’Œä¸­ä½æ•¸
    grouped_stats = df.groupby('Class')[feature_cols].agg(['mean', 'std', 'median'])
    
    # é¡¯ç¤ºå„é¡åˆ¥ä¸‹ç‰¹å¾µçš„å¹³å‡å€¼
    print("å„ç‰¹å¾µåœ¨ä¸åŒé¡åˆ¥ä¸‹çš„å¹³å‡å€¼ï¼š")
    # xs('mean', level=1, axis=1) æå–ç¬¬äºŒå±¤ç´¢å¼•ç‚º'mean'çš„è³‡æ–™
    # round(3) å››æ¨äº”å…¥åˆ°ä¸‰ä½å°æ•¸
    print(grouped_stats.xs('mean', level=1, axis=1).round(3))
    
    # é¡¯ç¤ºå„é¡åˆ¥ä¸‹ç‰¹å¾µçš„æ¨™æº–å·®
    print("\nå„ç‰¹å¾µåœ¨ä¸åŒé¡åˆ¥ä¸‹çš„æ¨™æº–å·®ï¼š")
    print(grouped_stats.xs('std', level=1, axis=1).round(3))
    
    # å¼•å…¥scipy.statsæ¨¡çµ„é€²è¡Œçµ±è¨ˆæª¢é©—
    from scipy import stats
    
    # é¡¯ç¤ºçµ±è¨ˆæª¢é©—çš„æ¨™é¡Œ
    print("\n=== çµ„é–“å·®ç•°é¡¯è‘—æ€§æª¢é©— (t-test) ===")
    
    # å°æ¯å€‹ç‰¹å¾µé€²è¡Œç¨ç«‹æ¨£æœ¬tæª¢é©—
    for col in feature_cols:
        # æå–Class=0çµ„çš„è³‡æ–™
        group_0 = df[df['Class'] == 0][col]
        
        # æå–Class=1çµ„çš„è³‡æ–™
        group_1 = df[df['Class'] == 1][col]
        
        # é€²è¡Œç¨ç«‹æ¨£æœ¬tæª¢é©—
        # è¿”å›tçµ±è¨ˆé‡å’Œpå€¼
        t_stat, p_value = stats.ttest_ind(group_0, group_1)
        
        # æ ¹æ“špå€¼åˆ¤æ–·é¡¯è‘—æ€§æ°´æº–
        # ä½¿ç”¨ä¸‰å…ƒé‹ç®—å­é€²è¡Œå¤šå±¤æ¢ä»¶åˆ¤æ–·
        significance = "***" if p_value < 0.001 else "**" if p_value < 0.01 else "*" if p_value < 0.05 else ""
        
        # é¡¯ç¤ºæª¢é©—çµæœï¼ŒåŒ…å«tçµ±è¨ˆé‡ã€på€¼å’Œé¡¯è‘—æ€§æ¨™è¨˜
        print(f"{col}: t={t_stat:.3f}, p={p_value:.4f} {significance}")
    
    # é¡¯ç¤ºé¡¯è‘—æ€§æ°´æº–çš„èªªæ˜
    print("\nè¨»ï¼š* p<0.05, ** p<0.01, *** p<0.001")
```

## **ç°¡åŒ–ç‰ˆæœ¬ï¼ˆé©åˆåˆå­¸è€…ï¼‰**

```python
# === ç°¡åŒ–ç‰ˆæœ¬ - é©åˆåˆå­¸è€…å’Œå¿«é€Ÿæ•™å­¸ ===

# å¼•å…¥å¿…è¦çš„å‡½å¼åº«
import pandas as pd          # è³‡æ–™è™•ç†
import matplotlib.pyplot as plt  # åŸºæœ¬ç¹ªåœ–
import seaborn as sns        # çµ±è¨ˆç¹ªåœ–
import numpy as np           # æ•¸å€¼è¨ˆç®—
import warnings              # è­¦å‘Šæ§åˆ¶

# å¿½ç•¥è­¦å‘Šè¨Šæ¯
warnings.simplefilter(action='ignore', category=FutureWarning)

# å¾ç¶²è·¯è¼‰å…¥è³‡æ–™
url = "https://github.com/acechan0626/pythondata/raw/main/pima-indians-diabetes.csv"
df = pd.read_csv(url)        # è®€å–CSVæª”æ¡ˆ
print("è³‡æ–™è¼‰å…¥æˆåŠŸï¼")       # é¡¯ç¤ºæˆåŠŸè¨Šæ¯

# é¸æ“‡æ•¸å€¼å‹æ¬„ä½
numeric_cols = df.select_dtypes(include=['float64', 'int64']).columns.tolist()
# æ’é™¤ç›®æ¨™è®Šæ•¸ï¼Œåªä¿ç•™ç‰¹å¾µ
feature_cols = [col for col in numeric_cols if col != 'Class']

# === 1. ç›´æ–¹åœ– ===
n_cols = 3  # æ¯è¡Œ3å€‹å­åœ–
# è¨ˆç®—éœ€è¦çš„è¡Œæ•¸
n_rows = (len(feature_cols) + n_cols - 1) // n_cols
# å»ºç«‹å­åœ–
fig, axes = plt.subplots(n_rows, n_cols, figsize=(15, n_rows * 4))
axes = axes.flatten()  # æ”¤å¹³é™£åˆ—

# ç‚ºæ¯å€‹ç‰¹å¾µç¹ªè£½ç›´æ–¹åœ–
for i, col in enumerate(feature_cols):
    sns.histplot(df[col], kde=True, ax=axes[i])  # ç¹ªè£½ç›´æ–¹åœ–+å¯†åº¦æ›²ç·š
    axes[i].set_title(f'Histogram of {col}')     # è¨­å®šæ¨™é¡Œ

# åˆªé™¤å¤šé¤˜çš„å­åœ–
for i in range(len(feature_cols), len(axes)):
    fig.delaxes(axes[i])

plt.tight_layout()           # èª¿æ•´ä½ˆå±€
plt.savefig('histograms.png') # å„²å­˜åœ–ç‰‡
plt.show()                   # é¡¯ç¤ºåœ–ç‰‡

# === 2. ç®±å‹åœ– ===
fig, axes = plt.subplots(n_rows, n_cols, figsize=(15, n_rows * 4))
axes = axes.flatten()

# ç‚ºæ¯å€‹ç‰¹å¾µç¹ªè£½ç®±å‹åœ–
for i, col in enumerate(feature_cols):
    sns.boxplot(x=df[col], ax=axes[i])           # ç¹ªè£½ç®±å‹åœ–
    axes[i].set_title(f'Box Plot of {col}')     # è¨­å®šæ¨™é¡Œ

# åˆªé™¤å¤šé¤˜çš„å­åœ–
for i in range(len(feature_cols), len(axes)):
    fig.delaxes(axes[i])

plt.tight_layout()
plt.savefig('boxplots.png')
plt.show()

# === 3. ç›¸é—œçŸ©é™£ ===
plt.figure(figsize=(10, 8))                     # è¨­å®šåœ–ç‰‡å¤§å°
corr_matrix = df[numeric_cols].corr()           # è¨ˆç®—ç›¸é—œçŸ©é™£
sns.heatmap(corr_matrix, annot=True, cmap='coolwarm', fmt='.2f')  # ç¹ªè£½ç†±åŠ›åœ–
plt.title('Correlation Matrix')                 # è¨­å®šæ¨™é¡Œ
plt.savefig('correlation_matrix.png')           # å„²å­˜åœ–ç‰‡
plt.show()                                      # é¡¯ç¤ºåœ–ç‰‡

# === 4. Pairplot ===
# é¸æ“‡é‡è¦çš„æ¬„ä½
selected_cols = ['Glucose_concentration', 'Blood_pressure', 'BMI', 'Age', 'Class']
# ç¢ºä¿æ¬„ä½å­˜åœ¨
selected_cols = [col for col in selected_cols if col in df.columns]
# ç¹ªè£½pairplotï¼ŒæŒ‰Classåˆ†çµ„è‘—è‰²
sns.pairplot(df[selected_cols], hue='Class', diag_kind='kde')
plt.savefig('pairplot.png')                     # å„²å­˜åœ–ç‰‡
plt.show()                                      # é¡¯ç¤ºåœ–ç‰‡

print("æ‰€æœ‰åœ–è¡¨ç”Ÿæˆå®Œç•¢ï¼")                      # é¡¯ç¤ºå®Œæˆè¨Šæ¯
```

## **è¨»è§£èªªæ˜é‡é»**

1. **è®Šæ•¸å‘½å**ï¼šæ¯å€‹è®Šæ•¸çš„ç”¨é€”éƒ½æœ‰æ¸…æ¥šèªªæ˜
2. **å‡½æ•¸åƒæ•¸**ï¼šæ¯å€‹é‡è¦åƒæ•¸çš„ä½œç”¨éƒ½æœ‰è¨»è§£
3. **é‚è¼¯æµç¨‹**ï¼šæ¢ä»¶åˆ¤æ–·å’Œè¿´åœˆçš„é‚è¼¯éƒ½æœ‰èªªæ˜
4. **éŒ¯èª¤è™•ç†**ï¼štry-exceptçµæ§‹çš„ç”¨é€”æœ‰è©³ç´°è§£é‡‹
5. **åœ–è¡¨è¨­å®š**ï¼šæ¯å€‹åœ–è¡¨åƒæ•¸çš„æ„ç¾©éƒ½æœ‰èªªæ˜

é€™å€‹è©³ç´°è¨»è§£ç‰ˆæœ¬éå¸¸é©åˆæ•™å­¸ä½¿ç”¨ï¼Œå­¸ç”Ÿå¯ä»¥é€šéè¨»è§£ç†è§£æ¯ä¸€è¡Œç¨‹å¼ç¢¼çš„ä½œç”¨å’ŒåŸç†ï¼
